<div class="container">

    <div class="block-header">
        <h2>home/properties</h2>

    </div>
    
    <div class="card">
        <div class="card-header" style="display: flex;">
            <h2>Property List</h2>
            <a ui-sref="properties.new" class="btn bgm-cyan new_object"><i class="zmdi zmdi-plus"></i>&nbsp;&nbsp;New Property</a>
        </div>
                
        <div class="card-body">
            <div class="table-responsive" ng-if="vm.dataReady" > 
                <table ng-table="vm.tableFilter" class="table table-striped table-vmiddle" show-filter="true">
                    <tr ng-repeat="w in $data" ng-click="vm.clickHandler(w)">
                        <td data-title="'Code'" filter="{ 'code': 'number' }" sortable="'code'">
                            {{ w.code }}
                        </td>
                        <td data-title="'Full title'" filter="{ 'fullTitle': 'text' }" sortable="'fullTitle'">
                            {{ w.fullTitle }}
                        </td>
                        <td data-title="'Address'" filter="{ 'address': 'text' }" sortable="'address'">
                            {{ w.address }}
                        </td>
                        <td data-title="'Project'" filter="{ 'project.name': 'text' }" sortable="'project.name'">
                            {{ w.project.name }}
                        </td>
                        <td data-title="'Actions'">
                            <a class="btn btn-primary" ng-if="!w.$edit" ng-if="vm.userInfo.priority.property.read" ui-sref="properties.edit({id:w.new_ic})"><i class="zmdi zmdi-edit"></i></a>
                            <a class="btn btn-warning" ng-if="vm.userInfo.priority.property.delete" ng-click="vm.openDelete($event, w)"><i class="zmdi zmdi-delete"></i></a>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>

<script type="text/ng-template" id="myModalContent.html">
    <div class="modal-header">
        <h4 class="modal-title">Delete a property</h4>
    </div>
    <div class="modal-body">
        <p>Are you sure to delete the property?</p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-link" ng-click="ok()">OK</button>
        <button class="btn btn-link" ng-click="cancel()">Cancel</button>
    </div>
</script>


