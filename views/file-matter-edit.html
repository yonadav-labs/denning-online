<div class="container">
  <div class="card">
  <div class="card-body card-padding">
    <h2 class="c-purple p-b-15">{{ vm.title }}</h2>
    <div class="preview">
    <section layout="row" layout-sm="column" layout-align="start center" layout-wrap style="margin-left: -8px;">
      <div class="col-sm-12 col-md-10 m-b-25">
      <md-button class="btn-sm md-raised md-warn" style="min-height: 0;" ng-click="vm.openFolder()">Folder</md-button>
      <md-button class="btn-sm md-raised md-warn" style="min-height: 0;" ng-click="vm.accounts()">Accounts</md-button>
      <md-button class="btn-sm md-raised md-warn" style="min-height: 0;" ng-click="vm.notes()">Notes</md-button>
      <md-button class="btn-sm md-raised md-warn" style="min-height: 0;" ng-click="vm.payments()">Payments</md-button>
      <md-button class="btn-sm md-raised md-warn" style="min-height: 0;" ng-click="vm.upload()">Upload</md-button>
      <input type="file" class="hidden" ng-class="'matter-upload'" multiple ng-model="file" base-sixty-four-input onload="vm.onLoad">
      <md-button class="btn-sm md-raised md-warn" style="min-height: 0;" data-ui-sref="courtdiary">Calendar</md-button>
      <md-button class="btn-sm md-raised md-warn" style="min-height: 0;">Checklist</md-button>
      <md-button class="btn-sm md-raised md-warn" style="min-height: 0;">Tasks</md-button>
      </div>
    </section>
    <form ng-submit="vm.onSubmit()" name="vm.form" novalidate>
      <formly-form model="vm.model" fields="vm.fields" options="vm.options" form="vm.form">      
      </formly-form>
    </form>    

    <form ng-submit="vm.onSubmit()" name="vm.form" novalidate>
      <uib-tabset>
      <uib-tab ng-repeat="tab in vm.tabs" heading="{{tab.label}}">
        <div ng-repeat="group in tab.groups" class="col-lg-9 no-padding">  
          <div class="group">
            <div class="form-group">
              <input id="{{group.key}}-label" name="{{group.key}}-label" class="form-control group-label" ng-model="vm.model[group.key+'-label']" ng-value="group.label" />
            </div>
            <formly-form model="vm.model" fields="group.attrs" form="vm.form" options="group.options">
            </formly-form>
          </div>
        </div>
      </tab>
      </tabset>
      <div class="clearfix"></div>
      <div class="col-md-9">
        <div class="pull-right">
          <button class="btn btn-default btn-icon-text m-l-5 waves-effect"><i class="zmdi zmdi-arrow-back"></i> Back</button>
          <button class="btn btn-default btn-icon-text m-l-5 waves-effect"><i class="zmdi zmdi-long-arrow-up"></i> Up</button>
          <button class="btn btn-default btn-icon-text m-l-5 waves-effect"><i class="zmdi zmdi-arrow-forward"></i> Forward</button>
          <button type="submit" class="btn btn-primary m-l-5 submit-button" ng-disabled="vm.form.$invalid" style="margin-top: 2px;">Save</button>
          <button type="button" class="btn btn-default m-l-5 m-r-20" ng-click="vm.cancel()">Cancel</button>
        </div>
      </div>
    </form>
    </div>
    <h2 ng-if="false">Form Data</h2>
    <pre ng-if="false">{{ vm.model | json }}</pre>
  </div>
  </div>
</div>  

<!-- Put custom templates here -->
<script type="text/ng-template" id="datepicker.html">
  <p class="input-group">
  <input  type="text"
      id="{{::id}}"
      name="{{::id}}"
      ng-model="model[options.key]"
      class="form-control"
      ng-click="datepicker.open($event)"
      is-open="datepicker.opened"
      datepicker-options="to.datepickerOptions" />
  <span class="input-group-btn">
    <button type="button" class="btn btn-default" ng-click="datepicker.open($event)" ng-disabled="to.disabled">
    <i class="glyphicon glyphicon-calendar"></i>
    </button>
  </span>
  </p>
</script>

<!-- BANK GROUP -->
<script type="text/ng-template" id="bank.html">
  <div class="form-group col-md-12" ng-repeat="n in range(1, to.numBank)">
    <div class="form-group col-md-12">
      <div style="display: flex;">
        <label for="{{::id}}_party_{{$index}}" class="form-control attr-label"> Bank Branch</label>

        <md-autocomplete
          md-selected-item="model['clsBank'+(n+to.base)]"
          md-search-text="searchText"
          md-items="item in queryBanks(searchText)"
          md-item-text="item.strName ? item.strName: ' '"
          md-min-length="1"
          md-autoselect="false"
          class="default-input"
          style="width:72%">
        <md-item-template>
          <span md-highlight-text="searchText" md-highlight-flags="i">{{item.strName}}</span>
        </md-item-template>
        </md-autocomplete>

        <a class="btn btn-primary short-btn bgm-lightgreen" ng-click="contactDialog(model['clsC'+(n+to.base)], false)">
          <span class="glyphicon glyphicon-plus" aria-hidden="true" title="Create a new party and choose it"></span>
        </a>
        <a class="btn btn-primary short-btn" ng-click="viewContact(model['clsC'+(n+to.base)])">
          <span class="glyphicon glyphicon-eye-open" aria-hidden="true" title="See detail of party"></span>
        </a>
      </div>
    </div>
    <div class="form-group col-md-12 m-l-15">
      <div style="display: flex;">
      <label class="form-control attr-label">Bank</label>
      <input type="text" class="form-control" readonly="true" ng-model="model['clsBank'+(n+to.base)].clsBankCode.strName" style="width:45%;">
      </div>
    </div>
    <div class="form-group col-md-12 m-l-15">
      <div style="display: flex;">
      <label class="form-control attr-label">Address</label>
      <input type="text" class="form-control" readonly="true" ng-model="model['clsBank'+(n+to.base)].clsBankCode.strRegAdd" style="width:45%;">
      </div>
    </div>
    <div class="form-group col-md-12 m-l-15">
      <div style="display: flex;">
      <label class="form-control attr-label">CAC / LDC</label>
      <input type="text" class="form-control" readonly="" ng-model="model['clsBank'+n].clsCACCode.strName" style="width:45%;">
      </div>
    </div>    
    <div class="form-group col-md-12 m-l-15">
      <div style="display: flex;">
      <label class="form-control attr-label">PA Name</label>
      <input type="text" class="form-control" ng-model="model['clsBank'+n].clsBankCode.strRegAdd2" style="width:45%;">
      </div>
    </div>
    <div class="form-group col-md-12 m-l-15">
      <div style="display: flex;">
      <label class="form-control attr-label">Bank Ref</label>
      <input type="text" class="form-control" ng-model="model['clsBank'+n].clsBankCode.strRegAdd3" style="width:45%;">
      </div>
    </div>
    <div class="form-group col-md-12 m-l-15">
      <div style="display: flex;">
      <label class="form-control attr-label">Bank Instruction Date</label>
      <input type="text" class="form-control" ng-model="model['clsBank'+n].clsBankCode.strRegAdd4" style="width:45%;">
      </div>
    </div>    
    <div class="form-group col-md-12 m-l-15">
      <div style="display: flex;">
      <label class="form-control attr-label">Letter of Offer Date</label>
      <input type="text" class="form-control" ng-model="model['clsBank'+n].clsBankCode.strRegAdd5" style="width:45%;">
      </div>
    </div>    
  </div>  
</script>

<!-- CONTACT GROUP -->
<script type="text/ng-template" id="contact.html">
  <div class="form-group col-md-12" ng-repeat="n in range(to.c_start, to.c_end)" ng-if="to.party && (model['clsC'+n].code || model.tmp['clsC'+n])">
    <div style="display: flex;">
      <label class="form-control attr-label short-label">{{ $index+1 }}</label>

      <md-autocomplete
        md-selected-item="model['clsC'+n]"
        md-search-text="searchText"
        md-items="item in queryContacts(searchText)"
        md-item-text="item.strName ? item.strName+' ( '+item.strIDNo+' )': ' '"
        md-min-length="1"
        md-autoselect="false"
        class="default-input"
        style="width:72%">
      <md-item-template>
        <span md-highlight-text="searchText" class="col-1" md-highlight-flags="i">{{item.strName}}</span>
        <span md-highlight-text="searchText" md-highlight-flags="i">{{item.strIDNo}}</span>
      </md-item-template>
      </md-autocomplete>

      <a class="btn btn-primary short-btn bgm-lightgreen" ng-click="contactDialog(model['clsC'+n], false)">
        <span class="glyphicon glyphicon-plus" aria-hidden="true" title="Create a new party and choose it"></span>
      </a>
      <a class="btn btn-primary short-btn" ng-click="viewContact(model['clsC'+n])">
        <span class="glyphicon glyphicon-eye-open" aria-hidden="true" title="See detail of party"></span>
      </a>
      <input class="form-control" ng-model="model['strShareC'+n]" ng-if="to.share" style="width: 15%;" placeholder="Share" />
      <a class="btn btn-danger short-btn" ng-click="removeParty(n, to.c_start, to.c_end)">
        <span class="glyphicon glyphicon-trash" aria-hidden="true" title="Remove this party from group"></span>
      </a>
    </div>
  </div>
  <div style="margin-bottom: 30px;" ng-if="to.party">
    <a class="btn btn-primary short-btn" style="margin-left: 50px;" ng-click="addParty(to.c_start, to.c_end)" title="Add a new party to group">
      <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>&nbsp;&nbsp;Add a new party
    </a>
  </div>
  <div ng-if="to.solicitor">
    <div class="form-group col-md-12">
      <div style="display: flex;">
      <label class="form-control attr-label">Firm</label>
      <md-autocomplete
        md-selected-item="model[to.field]"
        md-search-text="q_lf"
        md-items="item in queryLFs(q_lf)"
        md-item-text="item.strName ? item.strName: ' '"
        md-min-length="1"
        md-autoselect="false"
        class="default-input"
        style="width:45%">
        <md-item-template>
        <span md-highlight-text="q_lf" class="col-1" md-highlight-flags="i">{{item.strName}}</span>
        </md-item-template>
      </md-autocomplete>
      <a class="btn btn-primary short-btn bgm-lightgreen" ng-click="legalfirmDialog(model[options.key+'_solicitor'], false)">
        <span class="glyphicon glyphicon-plus" aria-hidden="true" title="Create a new legal firm and choose it"></span>
      </a>
      <a class="btn btn-primary short-btn" ng-click="viewLegalFirm(model[options.key+'_solicitor'])" title="See detail of solicitor">
        <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
      </a>
      <div class="checkbox" style="margin: 6px 0 6px 18px;">
        <label>
          <input type="checkbox" ng-model="represent_this" ng-click="representChange()">
          <i class="input-helper"></i>
          Representing this party
        </label>
      </div>
      </div>
    </div>
    <div class="form-group col-md-12">
      <div style="display: flex;">
        <label class="form-control attr-label">Tel / Fax / Email</label>
        <label class="form-control p-t-5" style="width:45%;">
          {{ model[to.field].strPhone1 }} / {{ model[to.field].strEmailAddress }}
        </label>
      </div>
    </div>
    <div class="form-group col-md-12">
      <div style="display: flex;">
      <label class="form-control attr-label">Location</label>
      <input type="text" class="form-control" readonly="true" ng-model="model[to.field].strCity" style="width:45%;">
      </div>
    </div>
    <div class="form-group col-md-12">
      <div style="display: flex;">
      <label class="form-control attr-label">Staff in Charge</label>
      <input type="text" class="form-control" ng-model="model[options.key+'_staff']" style="width:45%;">
      </div>
    </div>
    <div class="form-group col-md-12">
      <div style="display: flex;">
      <label class="form-control attr-label">Solicitor Ref.</label>
      <input type="text" class="form-control" ng-model="model['strLawyer'+to.idx+'Ref']" style="width:45%;">
      </div>
    </div>
  </div>
</script>

<!-- PROPERTY GROUP -->
<script type="text/ng-template" id="property.html">  
  <div class="form-group col-md-12" ng-repeat="n in range(1, 5)" ng-if="to.property && (model['clsP'+n].code || model.tmp['clsP'+n])">
    <div style="display: flex;">
      <label class="form-control attr-label short-label">{{ n }}</label>

      <md-autocomplete
        md-selected-item="model['clsP'+n]"
        md-search-text="qspp"
        md-items="item in queryProperties(qspp)"
        md-selected-item-change="propertyChange(item, n)"
        md-item-text="item.strAddress ? item.strAddress : ' '"
        md-min-length="1"
        md-autoselect="false"
        class="default-input"
        style="width:72%">
      <md-item-template>
        <span md-highlight-text="qspp" class="col-1" md-highlight-flags="i">{{item.code}}</span>
        <span md-highlight-text="qspp" md-highlight-flags="i">{{item.strAddress}}</span>
      </md-item-template>
      </md-autocomplete>

      <a class="btn btn-primary short-btn bgm-lightgreen" ng-click="propertyDialog(property, false)">
        <span class="glyphicon glyphicon-plus" aria-hidden="true" title="Create a new property and choose it"></span>
      </a>
      <a class="btn btn-primary short-btn" ng-click="viewProperty(model['clsP'+n])">
        <span class="glyphicon glyphicon-eye-open" aria-hidden="true" title="See detail of property"></span>
      </a>
      <input class="form-control" ng-model="model['strShare'+n]" ng-if="to.share" style="width: 15%;" placeholder="Share" />
      <a class="btn btn-danger short-btn" ng-click="removeProperty(n, 1, 5)">
        <span class="glyphicon glyphicon-trash" aria-hidden="true" title="Remove this property from group"></span>
      </a>
    </div>
  </div>
  <div style="margin-bottom: 30px;" ng-if="to.property">
    <a class="btn btn-primary short-btn" style="margin-left: 50px;" ng-click="addProperty(1, 5)" title="Add a new property to group">
        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>&nbsp;&nbsp;Add a new property
    </a>  
  </div>
  <div class="form-group">
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Address</label>
    <input type="text" readonly class="form-control" ng-model="property.strAddress">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">{{ property.strTitleType }}</label>
    <label class="form-control attr-label">{{ property.boolTitleComeOut }}</label>
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Area</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" readonly ng-model="property.strArea" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Category of Land Use</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" readonly ng-model="model[options.key+'_repayment_period']" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Tenure</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" readonly ng-model="property.strLandTenure" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Express Condition</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" readonly ng-model="property.strExpressCondition" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Lease Expiry Date</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" readonly ng-model="property.dtLeaseExpDate" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group1 col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Building Type</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" readonly ng-model="property.strBuildingCultivationType" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="clearfix"></div>
  <div class="form-group1 col-md-6">
    <div class="checkbox" style="margin: 6px 0 6px 18px;">
      <label>
        <input type="checkbox" ng-model="property.boolRestrictionInInterest" readonly="">
        <i class="input-helper"></i>
        NO Restriction In Interest
      </label>
    </div>    
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Annual Quit Rent</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" readonly ng-model="property.decAnnualQuit" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>     
  <div class="form-group1 col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Restriction Against</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" readonly ng-model="property.strRestrictionAgainst" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Assessment Rate</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" readonly ng-model="model[options.key+'_islamic_loan']" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>     
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Approving Authority</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" readonly ng-model="property.strApprovingAuthority" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>      
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Previous Title</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" readonly ng-model="property.strPreviousTitle" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>      
  <div class="form-group col-sm-10">
    <div class="radio col-sm-4">
      <label>
        <input type="radio" readonly name="propertyType" value="0" ng-model="vm.property.propertyType.code">
        <i class="input-helper"></i>
        ( Price / Area )
      </label>
    </div>
    <div class="radio col-sm-4">
      <label>
        <input type="radio" readonly name="propertyType" value="1" ng-model="vm.property.propertyType.code">
        <i class="input-helper"></i>
        Fixed Adjustment Rate
      </label>
    </div>
    <div class="radio col-sm-4">
      <div class="fg-line">
        <input type="text" readonly ng-model="model[options.key+'_selling_price']" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="clearfix"></div>
  <h4 class="p-5 m-b-15 group-label">Details as per Principla SPA</h4>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Unit No.</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" readonly ng-model="property.strUnitParcelNo" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Project Name</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" readonly ng-model="property.strProjectName" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Unit Area</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" readonly ng-model="property.strUnitArea" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Developer</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" readonly ng-model="property.clsDeveloper.strName" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Building Description</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" readonly ng-model="model[options.key+'_selling_price']" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Proprietor</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text"  readonlyng-model="property.clsProprietor
.strName" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group col-md-6 col-md-offset-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Block / Master Title</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" readonly ng-model="property.strBlockMasterTitleAdd" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  </div>
</script>

<!-- FILE INFORMATION -->
<script type="text/ng-template" id="file.html">  
  <div class="form-group col-md-12" ng-if="to.party">
    <div style="display: flex;">
      <label class="form-control attr-label">Primary Client</label>

      <md-autocomplete
        md-selected-item="model.clsPrimaryClient"
        md-search-text="qspc"
        md-items="item in queryContacts(qspc)"
        md-item-text="item.strName+' ( '+item.strIDNo+' )'"
        md-min-length="1"
        md-autoselect="false"
        class="default-input"
        style="width:72%">
      <md-item-template>
        <span md-highlight-text="qspc" class="col-1" md-highlight-flags="i">{{item.strName}}</span>
        <span md-highlight-text="qspc" md-highlight-flags="i">{{item.strIDNo}}</span>
      </md-item-template>
      </md-autocomplete>

      <a class="btn btn-primary short-btn bgm-lightgreen" ng-click="contactDialog(model.clsPrimaryClient, false)">
        <span class="glyphicon glyphicon-plus" aria-hidden="true" title="Create a new party and choose it"></span>
      </a>
      <a class="btn btn-primary short-btn" target="_new" ng-click="viewContact(model.clsPrimaryClient)">
        <span class="glyphicon glyphicon-eye-open" aria-hidden="true" title="See detail of party"></span>
      </a>
      <input id="{{::id}}_share_{{$index}}" name="{{::id}}_share_{{$index}}" class="form-control" ng-model="model.clsPrimaryClient.share" ng-if="to.share" style="width: 15%;" placeholder="Share" />
    </div>
  </div>
  <div ng-if="to.solicitor">
  <div class="clearfix"></div>
  <h4 class="p-5 m-b-15 group-label">References</h4>
  <div class="form-group col-md-12">
    <div style="display: flex;">
      <label class="form-control attr-label">Ref 1 (Automatic)</label>
      <input type="text" class="form-control" readonly="" ng-model="model.strFileNo1" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
      <label class="form-control attr-label">Ref 2 (Manual)</label>
      <input type="text" class="form-control" ng-model="model.strFileNo2" style="width:45%;">
    </div>
  </div>
  <div class="clearfix"></div>
  <h4 class="p-5 m-b-15 group-label">Matter Type</h4>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Matter Code</label>
    <md-autocomplete
      md-selected-item="model.clsMatterCode"
      md-search-text="qmc"
      md-items="item in queryCodes(qmc)"
      md-item-text="item.strDescription+' ( '+item.code+' )'"
      md-min-length="1"
      md-autoselect="false"
      class="default-input"
      style="width:45%">
    <md-item-template>
      <span md-highlight-text="qmc" class="col-360" md-highlight-flags="i">{{item.strDescription}}</span>
      <span md-highlight-text="qmc" md-highlight-flags="i">{{item.code}}</span>
    </md-item-template>
    </md-autocomplete>
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Category</label>
    <input type="text" class="form-control" readonly="" ng-model="model.clsMatterCode.strCategory" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Department</label>
    <input type="text" class="form-control" readonly="" ng-model="model.clsMatterCode.strDept" style="width:45%;">
    </div>
  </div>
  <div class="clearfix"></div>
  <h4 class="p-5 m-b-15 group-label">Checklist</h4>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Checklist</label>
    <md-autocomplete
      md-selected-item="model.clsPresetChecklist"
      md-search-text="qpscl"
      md-items="item in queryChecklist(qpscl)"
      md-item-text="item.code ? item.strDescription+' ( '+item.code+' )': ' '"
      md-min-length="1"
      md-autoselect="false"
      class="default-input"
      style="width:45%;">
    <md-item-template>
      <span md-highlight-text="qpscl" class="col-1" md-highlight-flags="i">{{item.code}}</span>
      <span md-highlight-text="qpscl" md-highlight-flags="i">{{item.strDescription}}</span>
    </md-item-template>
    </md-autocomplete>
    </div>
  </div>
  <div class="clearfix"></div>
  <h4 class="p-5 m-b-15 group-label">Billing Code</h4>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Billing Code</label>
    <md-autocomplete
      md-selected-item="model.clsPresetBill"
      md-search-text="qpsb1"
      md-items="item in queryBills(qpsb1)"
      md-item-text="item.code ? item.strDescription+' ( '+item.code+' )': ' '"
      md-min-length="1"
      md-autoselect="false"
      class="default-input"
      style="width:45%;">
    <md-item-template>
      <span md-highlight-text="qpsb1" class="col-1" md-highlight-flags="i">{{item.code}}</span>
      <span md-highlight-text="qpsb1" md-highlight-flags="i">{{item.strDescription}}</span>
    </md-item-template>
    </md-autocomplete>
    </div>
  </div>
  <div class="clearfix"></div>
  <h4 class="p-5 m-b-15 group-label">Status</h4>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Open Date</label>
    <input type="text" class="form-control" ng-value="model.dtDateOpenFile.split(' ')[0]" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Turnaround</label>
    <input type="text" class="form-control" ng-model="model.intTurnaround" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Status</label>
    <input type="text" class="form-control" readonly="" ng-value="model.clsFileStatus.strDescription" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Close Date</label>
    <input type="text" class="form-control" readonly="" ng-value="model.dtDateCloseFile.split(' ')[0]" style="width:45%;">
    </div>
  </div>

  <div class="clearfix"></div>
  <h4 class="p-5 m-b-15 group-label">Staff in Charge</h4>
  <div class="form-group col-md-12">
    <div style="display: flex;">
      <label class="form-control attr-label">Partner in charge</label>
      <md-autocomplete
        md-selected-item="model.clsPartnerInCharge"
        md-search-text="qspic"
        md-items="item in queryStaffs(qspic)"
        md-item-text="item.strName ? item.strName+' ( '+item.strIdNo+' )': ' '"
        md-min-length="1"
        md-autoselect="false"
        class="default-input"
        style="width:45%;">
      <md-item-template>
        <span md-highlight-text="qspic" class="col-1" md-highlight-flags="i">
          ({{item.strIdNo}}) {{item.strName}}
        </span>
      </md-item-template>
      </md-autocomplete>
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">L.A in charge</label>
      <md-autocomplete
        md-selected-item="model.clsLAInCharge"
        md-search-text="qslic"
        md-items="item in queryStaffs(qslic)"
        md-item-text="item.strName ? item.strName+' ( '+item.strIdNo+' )': ' '"
        md-min-length="1"
        md-autoselect="false"
        class="default-input"
        style="width:45%;">
      <md-item-template>
        <span md-highlight-text="qslic" class="col-1" md-highlight-flags="i">
          ({{item.strIdNo}}) {{item.strName}}
        </span>
      </md-item-template>
      </md-autocomplete>
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Clerk in charge</label>
      <md-autocomplete
        md-selected-item="model.clsClerkInCharge"
        md-search-text="qscic"
        md-items="item in queryStaffs(qscic)"
        md-item-text="item.strName ? item.strName+' ( '+item.strIdNo+' )': ' '"
        md-min-length="1"
        md-autoselect="false"
        class="default-input"
        style="width:45%;">
      <md-item-template>
        <span md-highlight-text="qscic" class="col-1" md-highlight-flags="i">
          ({{item.strIdNo}}) {{item.strName}}
        </span>
      </md-item-template>
      </md-autocomplete>
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Team</label>
      <md-autocomplete
        md-selected-item="model.team"
        md-search-text="qsctc"
        md-items="item in queryStaffs(qsctc)"
        md-item-text="item.strName ? item.strName+' ( '+item.strIdNo+' )': ' '"
        md-min-length="1"
        md-autoselect="false"
        class="default-input"
        style="width:45%;">
      <md-item-template>
        <span md-highlight-text="qscic" class="col-1" md-highlight-flags="i">
          ({{item.strIdNo}}) {{item.strName}}
        </span>
      </md-item-template>
      </md-autocomplete>
    </div>
  </div>
  <div class="clearfix"></div>
  <h4 class="p-5 m-b-15 group-label">Location</h4>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Pocket Location</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_solicitor_ref']" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Physical File Location</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_solicitor_ref']" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Archive</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_solicitor_ref']" style="width:45%;">
    </div>
  </div>
  <div class="clearfix"></div>
  <h4 class="p-5 m-b-15 group-label">Related Matter</h4>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Related Matter</label>
    <input type="text" class="form-control" ng-model="model.strRelatedFile" style="width:45%;">
    </div>
  </div>  
  <div class="clearfix"></div>
  <h4 class="p-5 m-b-15 group-label">Remarks</h4>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Remarks</label>
    <textarea class="form-control p-l-10" rows="8" ng-model="model.strRemarks" placeholder="type here...." style="width:45%;"></textarea>
    </div>
  </div>  
  <div class="clearfix"></div>
  <h4 class="p-5 m-b-15 group-label">Office Use</h4>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Entered by</label>
    <div class="col-sm-8">
      <input type="text" class="form-control" readonly="" ng-model="model.clsEnteredBy.strInitials">
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Updated by</label>
    <div class="col-sm-8">
      <input type="text" class="form-control" readonly="" ng-model="model.clsUpdatedBy.strInitials">
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Date</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" readonly="" ng-value="model.dtDateEntered.split(' ')[0]" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Date</label>
    <div class="col-sm-8">
      <div class="fg-line">        
        <label class="form-control input-sm" id="inputEmail3">{{ model.dtDateUpdated | date : "dd/MM/yyyy" }}</label>
      </div>
    </div>
  </div>
  </div>
</script>

<script type="text/ng-template" id="case.html">
  <div class="form-group">
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Court</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_court']" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Place</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_place']" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Court No.</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_court_no']" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Case Type</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_case_type']" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Case No.</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_case_no']" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Party Type</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_party_type']" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">SAR</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_SAR']" style="width:45%;">
    </div>
  </div>  
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Judge</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_judge']" style="width:45%;">
    </div>
  </div>  
  </div>
</script>

<script type="text/ng-template" id="price.html">
  <div class="form-group">
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Purchase Price</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_solicitor_ref']" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Earnest Deposit</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_solicitor_ref']" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Balance Deposit</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_solicitor_ref']" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Total Deposit</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_solicitor_ref']" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Balance Purchase Price</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_solicitor_ref']" style="width:45%;">
    </div>
  </div>
  <div class="clearfix"></div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">GST</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_solicitor_ref']" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">GST Price Value</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_solicitor_ref']" style="width:45%;">
    </div>
  </div>  
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Purchase Price</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_solicitor_ref']" style="width:45%;">
    </div>
  </div>  
  <div class="clearfix"></div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Court A</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_solicitor_ref']" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Court B</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_solicitor_ref']" style="width:45%;">
    </div>
  </div>  
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Court C</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_solicitor_ref']" style="width:45%;">
    </div>
  </div>  
  </div>
</script>

<script type="text/ng-template" id="loan.html">
  <div class="form-group">
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Type of Loan</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_loan_type']" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-12">
    <div style="display: flex;">
    <label class="form-control attr-label">Type of Finacing</label>
    <input type="text" class="form-control" ng-model="model[options.key+'_fiancing_type']" style="width:45%;">
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Term Loan Amount</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="number" ng-model="model[options.key+'_term_loan_amount']" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Repayment Period (TL)</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="number" ng-model="model[options.key+'_repayment_period']" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">DO Loan Amount</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="number" ng-model="model[options.key+'_do_loan_amount']" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Interest Rate (TL)</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="number" ng-model="model[options.key+'_interest_rate_tl']" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1"><i class="zmdi zmdi-plus"></i>&nbsp;&nbsp;MRTA</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" ng-model="model[options.key+'_MRTA']" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group1 col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Monthly Installment (TL)</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="number" ng-model="model[options.key+'_monthly_installment']" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="clearfix"></div>
  <div class="form-group1 col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1"><i class="zmdi zmdi-plus"></i>&nbsp;&nbsp;Legal Fee</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="number" ng-model="model[options.key+'_legal_fee']" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Interest Rate (DO)</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="number" ng-model="model[options.key+'_interest_rate_do']" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>     
  <div class="form-group1 col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1"><i class="zmdi zmdi-plus"></i>&nbsp;&nbsp;Other</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="text" ng-model="model[options.key+'_other']" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Islamic Loan</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="number" ng-model="model[options.key+'_islamic_loan']" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>     
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Total Loan</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="number" ng-model="model[options.key+'_total_loan']" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>      
  <div class="form-group col-md-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Selling Price</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="number" ng-model="model[options.key+'_selling_price']" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>      
  <div class="form-group col-md-6 col-md-offset-6">
    <label for="inputEmail3" class="col-sm-4 attr-label-1">Purchase Price</label>
    <div class="col-sm-8">
      <div class="fg-line">
        <input type="number" ng-model="model[options.key+'_purchase_price']" class="form-control input-sm" id="inputEmail3">
      </div>
    </div>
  </div>      
  </div>
</script>

<!-- GENERATE DOCUMENT GROUP -->
<script type="text/ng-template" id="gen-doc.html">
  <div class="form-group">
  <div style="display: flex; margin-bottom: 20px;">
    <label class="form-control attr-label-v1">Category</label>
    <select class="form-control" ng-model="model[options.key+'_category']" ng-change="updateType()" style="width:40%;">
    <option ng-repeat="item in categories" ng-value="item">{{item}}</option>
    </select>
    <label class="form-control attr-label-v1">Type</label>
    <select class="form-control" ng-model="model[options.key+'_type']" ng-change="updateTemplates()" style="width:65%;">
    <option ng-repeat="item in types" ng-value="item.strTypeCode">{{item.strTypeCode}}&nbsp;&nbsp;&nbsp;{{item.strTypeName}}</option>
    </select>
    <label class="form-control attr-label-v1">Source</label>
    <select class="form-control" ng-model="model[options.key+'_source']" ng-change="updateTemplates()" style="width:40%; margin-right: 20px;">
    <option ng-repeat="item in sources" ng-value="item">{{item}}</option>
    </select>
  </div>
  <div class="table-responsive"> 
    <table ng-table="tableFilter" class="table table-striped table-vmiddle" show-filter="true">
    <tr ng-repeat="w in $data">
      <td data-title="'Code'" filter="{ 'code': 'text' }" sortable="'code'">
        {{ w.code }}
      </td>
      <td data-title="'Created At'" filter="{ 'dtCreatedDate': 'text' }" sortable="'dtCreatedDate'">
        {{ w.dtCreatedDate }}
      </td>
      <td data-title="'Description'" filter="{ 'strDescription': 'text' }" sortable="'strDescription'">
        {{ w.strDescription }}
      </td>
      <td data-title="'Version'" filter="{ 'intVersionID': 'text' }" sortable="'intVersionID'">
        {{ w.intVersionID }}
      </td>
      <td data-title="'Lang'" filter="{ 'strLangauge': 'text' }" sortable="'strLangauge'">
        {{ w.strLangauge }}
      </td>
      <td data-title="'Source'" filter="{ 'strSource': 'text' }" sortable="'strSource'">
        {{ w.strSource }}
      </td>
    </tr>
    </table>
  </div>  
  <div class="button-group">
    <a class="btn btn-primary btn-sm pull-right" type="submit" ng-click="vm.save()">Upload</a>
    <a class="btn btn-primary btn-sm pull-right" type="submit" ng-click="vm.save()">Customize</a>
    <a class="btn btn-primary btn-sm pull-right" type="submit" ng-click="vm.save()">Generate</a>
  </div>
  </div>
</script>

<script type="text/ng-template" id="legalFirm.html">
  <div class="form-group">
  <div style="display: flex;">
  <input id="{{::id}}-label" name="{{::id}}-label" class="form-control attr-label" ng-model="model[options.key+'-label']" ng-value="options.templateOptions.label" />    
  <select class="form-control" ng-model="model[options.key]" style="width:300px;">
    <option ng-repeat="item in legalFirms" ng-value="item.id">{{item.name}}</option>
  </select>
  <a class="btn btn-primary short-btn"><span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span></a>
  </div>
  </div>
  <div class="clear-fix"></div> 
</script>

<script type="text/ng-template" id="text.html">
  <div class="form-group">
  <div style="display: flex;">
    <input id="{{::id}}-label" name="{{::id}}-label" class="form-control attr-label" ng-model="model[options.key+'-label']" ng-value="options.templateOptions.label" />    
    <input type="text" class="form-control" ng-model="model[options.key]" style="width:300px;">
  </div>
  </div>
</script>

<script type="text/ng-template" id="price_w_currency.html">
  <div class="form-group">
  <input id="{{::id}}-label" name="{{::id}}-label" class="form-control attr-label col-sm-1" ng-model="model[options.key+'-label']" ng-value="options.templateOptions.label" />
  <div style="display: flex;">
  <select class="form-control col-sm-2" ng-model="model[options.key+'-currency']" style="width:60px;">
    <option value="USD">USD</option>
    <option value="RM">RM</option>
    <option value="RMB">RMB</option>
  </select>
  <input id="{{::id}}" name="{{::id}}" class="col-sm-6" ng-model="model[options.key]" />
  </div>
  </div>
</script>

<script type="text/ng-template" id="group_label.html">
  <div class="form-group">
  <input id="{{::id}}" name="{{::id}}" class="form-control group-label" ng-model="model[options.key]" />
  </div>
</script>

<script type="text/ng-template" id="example-directive.html">
  <div class="form-group">
  <label for="{{::id}}">{{options.templateOptions.label}}</label>
  <input id="{{::id}}" name="{{::id}}" class="form-control" ng-model="model[options.key]" />
  </div>
</script>

